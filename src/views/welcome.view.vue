
<template>
  <section class="inner-search-banner primary-bg inner-page-bg  position-relative pb-5 pt-5 about-inner-page">
            <div class="container">
                <div class="row">
                    <div class="inner-box-content text-center d-flex align-items-center">
                        <h2 class="text-white fw-semibold text-start w-50">About Us</h2>
                        <p class="text-white mt-3 mb-3 text-start w-50 i-p-s-font">Sed ut perspiciatis unde omnis iste natus error volupta accusantium doloremque laudantium, totam remiga aperiam, eaque ipsa.
                        </p>
                    </div>
                </div>                
            </div>
        </section>
        <section class="about-section-col">
            <div class="container">
                <div class="row">
                    <div class="about-image">
                        <span>
                            <img :src="aboutUsImg" alt="img">
                        </span>
                    </div>
                </div>
                <div class="row">
                    <div class="about-content d-flex align-content-between gap-5 pt-5">
                        <div class="">
                            <p>
                                Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quaeab illo inventore. Donec tincidunt tempor quam, non mollis quam finibus nec.
                            </p>
                        </div>
                        <div class="">
                            <p>
                                Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quaeab illo inventore. Donec tincidunt tempor quam, non mollis quam finibus nec.
                            </p>
                        </div>
                        
                    </div>
                </div>
                <div class="row">
                    <div class="r-logos client-logo pt-5 mt-3">
                        <ul class="one-item d-flex justify-content-center align-content-center gap-5">
                            <li>
                                <img :src="aboutUsLogo1" alt="img">
                            </li>
                            <li>
                                <img :src="aboutUsLogo2" alt="img">
                            </li>
                            <li>
                                <img :src="aboutUsLogo3" alt="img">
                            </li>
                            <li>
                                <img :src="aboutUsLogo4" alt="img">
                            </li>
                            <li>
                                <img :src="aboutUsLogo5" alt="img">
                            </li>
                            <li>
                                <img :src="aboutUsLogo6" alt="img">
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
        <section class="history-slider-section pt-0">
            <div class="container">
                <div class="row ms-2 me-2">
                        <div class="page-title title-m"> 
                            <h3 class="fw-semibold overlay-before title-border position-relative ">Ensome history</h3>
                        </div>
                </div>
                <div class="row ms-2 me-2">
                <div class="history-slider mt-4 d-flex justify-content-between align-items-center gap-5">
                    <div class="cd-horizontal-timeline">
                        <div class="timeline">
                            <div class="events-wrapper">
                                <div class="events">
                                    <ol>
                                        <li><a href="#0" data-date="01/01/2005" class="selected">2005</a></li>
                                        <li><a href="#0" data-date="01/01/2007">2007</a></li>
                                        <li><a href="#0" data-date="01/01/2011">2011</a></li>
                                        <li><a href="#0" data-date="01/01/2012">2012</a></li>
                                        <li><a href="#0" data-date="01/01/2013">2013</a></li>
                                        <li><a href="#0" data-date="01/01/2014">2014</a></li>
                                        <li><a href="#0" data-date="01/01/2015">2015</a></li>
                                        <li><a href="#0" data-date="01/01/2016">2016</a></li>
                                    </ol>
                    
                                    <span class="filling-line" aria-hidden="true"></span>
                                </div> <!-- .events -->
                            </div> <!-- .events-wrapper -->
                                
                            <ul class="cd-timeline-navigation d-flex justify-content-end">
                                <li><a href="#0" class="prev inactive"><i class="fa fa-long-arrow-left" aria-hidden="true"></i></a></li>
                                <li><a href="#0" class="next"><i class="fa fa-long-arrow-right" aria-hidden="true"></i></a></li>
                            </ul> <!-- .cd-timeline-navigation -->
                        </div> <!-- .timeline -->
                    
                        <div class="events-content">
                            <ol>
                                <li class="selected" data-date="01/01/2005">
                                    <h2>Foundation of Calix</h2>
                                    <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quaeab illo inventore. Donec tincidunt tempor.</p>
                                </li>
                    
                                <li data-date="01/01/2007">
                                    <h2>Pilot</h2>
                                    <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quaeab illo inventore. Donec tincidunt tempor.</p>
                                </li>
                    
                                <li data-date="01/01/2011">
                                    <h2>First Plant</h2>
                                    <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quaeab illo inventore. Donec tincidunt tempor.</p>
                                </li>
                    
                                <li data-date="01/01/2012">
                                    <h2>Acquisition</h2>
                                    <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quaeab illo inventore. Donec tincidunt tempor.</p>
                                </li>
                    
                                <li data-date="01/01/2013">
                                    <h2>World’s First</h2>
                                    <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quaeab illo inventore. Donec tincidunt tempor.</p>
                                </li>
                    
                                <li data-date="01/01/2014">
                                    <h2>Awards</h2>
                                    <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quaeab illo inventore. Donec tincidunt tempor.</p>
                                </li>
                    
                                <li data-date="01/01/2015">
                                    <h2>More Wins</h2>
                                    <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quaeab illo inventore. Donec tincidunt tempor.</p>
                                </li>
                    
                                <li data-date="01/01/2016">
                                    <h2>Major Funding</h2>
                                    <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quaeab illo inventore. Donec tincidunt tempor.</p>
                                </li>
                    
                    
                            </ol>
                        </div> <!-- .events-content -->
                    </div>
                </div>
            </div>
            </div>
        </section>
        <section class="counter-section pt-0 pb-0">
            <div class="container">
                <div class="row ms-2 me-2">
                        <div class="page-title title-m"> 
                            <h3 class="fw-semibold overlay-before title-border position-relative ">Our achievements</h3>
                        </div>
                </div>
                <div class="row ms-2 me-2">
                <div class="count-col mt-5 d-flex justify-content-between align-items-center gap-5">
                    <article class="text-center primary-color fw-bold p-4">
                        <h2 class="d-flex align-items-center justify-content-center">
                            <span class="count" data-number="10"></span>
                            <span>+</span>
                        </h2>
                        <p>Project executed</p>
                    </article>
                    <article class="text-center primary-color fw-bold p-4">
                        <h2 class="d-flex align-items-center justify-content-center">
                            <span class="count" data-number="10"></span>
                            <span>+</span>
                        </h2>
                        <p>Data management</p>
                    </article>
                    <article class="text-center primary-color fw-bold p-4">
                        <h2 class="d-flex align-items-center justify-content-center">
                            <span class="count" data-number="20"></span>
                            <span>+</span>
                        </h2>
                        <p>Data management</p>
                    </article>
                    <article class="text-center primary-color fw-bold p-4">
                        <h2 class="d-flex align-items-center justify-content-center">
                            <span class="count" data-number="40"></span>
                            <span>+</span>
                        </h2>
                        <p>Satisfied customers</p>
                    </article>
                </div>
            </div>
            </div>
        </section>
       
        <section class="ser-image l-primary-bg position-relative overflow-hidden about-page">
            <div class="container">
                 <div class="row ">
                    <div class="justify-content-between d-flex">
                       <div class="ser-image-left ser-image-col d-flex align-content-center flex-column justify-content-center">
                           <article>
                             <span class="ser-icon"> <img :src="bannerSer01" alt="img"></span>
                                <h4>Lorem ipsum dolor sit amet</h4>
                                <span class="dec">Lorem ipsum dolor sit amet consectetur. Blandit vehicula non elementum eget vivamus vivamus. Neque velit varius fusce in elit suscipit a volutpat odio.
                                </span>                                        
                           </article>
                           <article>
                            <span class="ser-icon"> <img :src="bannerSer01" alt="img"></span>
                               <h4>Lorem ipsum dolor sit amet</h4>
                               <span class="dec">Lorem ipsum dolor sit amet consectetur. Blandit vehicula non elementum eget vivamus vivamus. Neque velit varius fusce in elit suscipit a volutpat odio.
                               </span>                                        
                          </article>
                          <article>
                            <span class="ser-icon"> <img :src="bannerSer01" alt="img"></span>
                               <h4>Lorem ipsum dolor sit amet</h4>
                               <span class="dec">Lorem ipsum dolor sit amet consectetur. Blandit vehicula non elementum eget vivamus vivamus. Neque velit varius fusce in elit suscipit a volutpat odio.
                               </span>                                        
                          </article>

                       </div>
                       <div class="ser-image-right ser-image-col d-flex align-content-center flex-column justify-content-center">
                        <img :src="serimg02" alt="img">
                       </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="it-works-about-us primary-bg inner-page-bg">
          <div class="container">
            <div class="row">
                <div class="inner-box-content text-center d-flex align-items-center flex-column ">
                    <h2 class="text-white fw-semibold text-center w-50">What they say about us</h2>
                </div>
            </div>
            <div class="row">
                <div class="how-w-abouts-box mt-5 gap-5 d-flex three-item">
                    <article  class="bg-white">
                        <span>
                            <ul class="d-flex gap-2">
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                            </ul>
                        </span>
                        <span class="d-flex pt-3 align-items-center">
                            <span>
                                <img :src="about1" alt="">
                            </span>
                            <span class="ps-2 ">
                                <span class="about-c-name">Alex Bern</span>
                                <span class="pt-2 about-c-p">CEO by PixelPerfect</span>
                            </span>
                        </span>
                        <span class="pt-3 about-decc">
                            “Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum.”
                        </span>
                    </article>

                    <article  class="bg-white">
                        <span>
                            <ul class="d-flex gap-2">
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                            </ul>
                        </span>
                        <span class="d-flex pt-3 align-items-center">
                            <span>
                                <img :src="about1" alt="">
                            </span>
                            <span class="ps-2 ">
                                <span class="about-c-name">Alex Bern</span>
                                <span class="pt-2 about-c-p">CEO by PixelPerfect</span>
                            </span>
                        </span>
                        <span class="pt-3 about-decc">
                            “Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum.”
                        </span>
                    </article>

                    <article  class="bg-white">
                        <span>
                            <ul class="d-flex gap-2">
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                            </ul>
                        </span>
                        <span class="d-flex pt-3 align-items-center">
                            <span>
                                <img :src="about1" alt="">
                            </span>
                            <span class="ps-2 ">
                                <span class="about-c-name">Alex Bern</span>
                                <span class="pt-2 about-c-p">CEO by PixelPerfect</span>
                            </span>
                        </span>
                        <span class="pt-3 about-decc">
                            “Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum.”
                        </span>
                    </article>

                </div>
            </div>
          </div>
      </section>
</template>

<script setup>

import bannerSer01 from "@/assets/banner-ser/banner-ser-01.svg"
import serimg02 from "@/assets/i-page/ser-imge/02.svg"
import serimg01 from "@/assets/i-page/ser-imge/01.svg"
import aboutUsImg from "@/assets/about-us/about-us-img.jpg"
import aboutUsLogo1 from "@/assets/about-us/logos/logo_1.svg"
import aboutUsLogo2 from "@/assets/about-us/logos/logo_2.svg"
import aboutUsLogo3 from "@/assets/about-us/logos/logo_3.svg"
import aboutUsLogo4 from "@/assets/about-us/logos/logo_4.svg"
import aboutUsLogo5 from "@/assets/about-us/logos/logo_5.svg"
import aboutUsLogo6 from "@/assets/about-us/logos/logo_6.svg"
import about1 from "@/assets/how-it-works/about-us-01.svg";


</script>
<script>
export default {
  data() {
    return {
      counts: [],
      intervals: [],
      timelines: [],
      eventsMinDistance: 60,
    };
  },
  mounted() {
    this.initTimeline();
    this.initCounts();
  },
  beforeDestroy() {
    this.intervals.forEach((interval) => {
      clearInterval(interval);
    });
  },
  methods: {
    parseDate(events) {
      const dateArrays = [];
      events.forEach((event) => {
        const dateComp = event.dataset.date.split('/');
        const newDate = new Date(dateComp[2], dateComp[1] - 1, dateComp[0]);
        dateArrays.push(newDate);
      });
      return dateArrays;
    },
    minLapse(dates) {
      // determine the minimum distance among events
      const dateDistances = [];
      for (let i = 1; i < dates.length; i++) {
        const distance = this.daydiff(dates[i - 1], dates[i]);
        dateDistances.push(distance);
      }
      return Math.min.apply(null, dateDistances);
    },
    daydiff(first, second) {
      return Math.round((second - first) / (1000 * 60 * 60 * 24));
    },
    setDatePosition(timelineComponents, min) {
      timelineComponents.timelineEvents.forEach((event, i) => {
        const distance = this.daydiff(
          timelineComponents.timelineDates[0],
          timelineComponents.timelineDates[i]
        );
        const distanceNorm = Math.round(distance / timelineComponents.eventsMinLapse) + 2;
        event.style.left = distanceNorm * min + 'px';
      });
    },
    setTimelineWidth(timelineComponents, width) {
      const timeSpan = this.daydiff(
        timelineComponents.timelineDates[0],
        timelineComponents.timelineDates[timelineComponents.timelineDates.length - 1]
      );
      const timeSpanNorm = timeSpan / timelineComponents.eventsMinLapse;
      const timeSpanRounded = Math.round(timeSpanNorm) + 4;
      const totalWidth = timeSpanRounded * width;
      timelineComponents.eventsWrapper.style.width = totalWidth + 'px';
      this.updateFilling(
        timelineComponents.timelineEvents[0],
        timelineComponents.fillingLine,
        totalWidth
      );

      return totalWidth;
    },
    updateFilling(selectedEvent, filling, totWidth) {
    // Change the implementation of updateFilling method
    console.log('selectedEvent',selectedEvent)
    var eventStyle = window.getComputedStyle(selectedEvent, null),
        eventLeft = Number(eventStyle.getPropertyValue("left").replace('px', '')),
        eventWidth = Number(eventStyle.getPropertyValue("width").replace('px', ''))/2;
    eventLeft = eventLeft + eventWidth;
    var scaleValue = eventLeft / totWidth;

    this.setTransformValue(filling, 'scaleX', scaleValue);
    },
    setTransformValue(element, property, value) {
      element.style["-webkit-transform"] = property + "(" + value + ")";
      element.style["-moz-transform"] = property + "(" + value + ")";
      element.style["-ms-transform"] = property + "(" + value + ")";
      element.style["-o-transform"] = property + "(" + value + ")";
      element.style["transform"] = property + "(" + value + ")";
    },
    initCounts() {
      const countElements = document.querySelectorAll(".count");
      this.counts = Array.from(countElements).map(() => 0);

      this.counts.forEach((count, index) => {
        const interval = setInterval(() => {
          this.counterup(index);
        }, 50);
        this.intervals.push(interval);
      });
    },
    counterup(index) {
      this.counts[index]++;
      const element = document.querySelectorAll(".count")[index];
      element.innerHTML = this.counts[index];

      const targetNumber = parseInt(element.dataset.number);
      if (this.counts[index] === targetNumber) {
        clearInterval(this.intervals[index]);
      }
    },
    initTimeline() {
      const timelines = document.querySelectorAll('.cd-horizontal-timeline');
      timelines.forEach((timeline) => {
        const timelineComponents = this.initTimelineComponents(timeline);
        this.setupTimelineEvents(timelineComponents);
      });
    },
    initTimelineComponents(timeline) {
      const timelineComponents = {};
      timelineComponents['timelineWrapper'] = timeline.querySelector('.events-wrapper');
      timelineComponents['eventsWrapper'] = timelineComponents['timelineWrapper'].querySelector('.events');
      timelineComponents['fillingLine'] = timelineComponents['eventsWrapper'].querySelector('.filling-line');
      timelineComponents['timelineEvents'] = timelineComponents['eventsWrapper'].querySelectorAll('a');
      timelineComponents['timelineDates'] = this.parseDate(timelineComponents['timelineEvents']);
      timelineComponents['eventsMinLapse'] = this.minLapse(timelineComponents['timelineDates']);
      timelineComponents['timelineNavigation'] = timeline.querySelector('.cd-timeline-navigation');
      timelineComponents['eventsContent'] = timeline.querySelector('.events-content');

      this.setDatePosition(timelineComponents, this.eventsMinDistance);
      const timelineTotWidth = this.setTimelineWidth(timelineComponents, this.eventsMinDistance);
      timeline?.classList.add('loaded');

      timelineComponents['timelineNavigation'].querySelector('.next').addEventListener('click', (event) => {
        event.preventDefault();
        this.updateSlide(timelineComponents, timelineTotWidth, 'next');
      });

      timelineComponents['timelineNavigation'].querySelector('.prev').addEventListener('click', (event) => {
        event.preventDefault();
        this.updateSlide(timelineComponents, timelineTotWidth, 'prev');
      });

      timelineComponents['eventsWrapper'].addEventListener('click', (event) => {
        if (event.target.tagName === 'A') {
          event.preventDefault();
          timelineComponents['timelineEvents'].forEach((el) => {
            el?.classList.remove('selected');
          });
          event.target?.classList.add('selected');
          this.updateOlderEvents(event.target);
          this.updateFilling(event.target, timelineComponents['fillingLine'], timelineTotWidth);
          this.updateVisibleContent(event.target, timelineComponents['eventsContent']);
        }
      });

      timelineComponents['eventsContent'].addEventListener('swipeleft', () => {
        const mq = this.checkMQ();
        if (mq === 'mobile') {
          this.showNewContent(timelineComponents, timelineTotWidth, 'next');
        }
      });

      timelineComponents['eventsContent'].addEventListener('swiperight', () => {
        const mq = this.checkMQ();
        if (mq === 'mobile') {
          this.showNewContent(timelineComponents, timelineTotWidth, 'prev');
        }
      });

      window.addEventListener('keyup', (event) => {
        if (event.which === 37 && this.elementInViewport(timeline)) {
          this.showNewContent(timelineComponents, timelineTotWidth, 'prev');
        } else if (event.which === 39 && this.elementInViewport(timeline)) {
          this.showNewContent(timelineComponents, timelineTotWidth, 'next');
        }
      });

      return timelineComponents;
    },
    setupTimelineEvents(timelineComponents) {
      // Additional setup for timeline events if needed
    },
    updateSlide(timelineComponents, timelineTotWidth, string) {
      const translateValue = this.getTranslateValue(timelineComponents['eventsWrapper']);
      const wrapperWidth = Number(window.getComputedStyle(timelineComponents['timelineWrapper']).width.replace('px', ''));
      if (string === 'next') {
        this.translateTimeline(timelineComponents, translateValue - wrapperWidth + this.eventsMinDistance, wrapperWidth - timelineTotWidth);
      } else {
        this.translateTimeline(timelineComponents, translateValue + wrapperWidth - this.eventsMinDistance);
      }
    },
    // Implement other timeline-related methods as needed
  },
};
</script>